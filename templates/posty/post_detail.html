{% extends "base.html" %}
{% block content %}
    {% load static %}
    <div class="post-entry column is-four-fifths">
        {% comment %} Detail View {% endcomment %}
        <h2>
            <a href="{% url 'posty:profile' post.user.pk %}"
               style="text-decoration:none">{{ post.user.username }}</a>'s Post
        </h2>
        {% comment %} link to postman write view with post user name autofilled, send to existing conversation if one already exists {% endcomment %}
        <a href="{% url 'postman:write' post.user.username %}">Send {{ post.user.username }} a message</a>
        <br>
        {{ post.body|wordwrap:60|linebreaks }}
        {% comment %} set width and height if image is default image {% endcomment %}
        {% if post.image.url == '/media/images/onebyone.png' %}
            <img src="{{ post.image.url }}"
                 width="0"
                 height="0"
                 style="visibility: hidden">
        {% else %}
            <img src="{{ post.image.url }}"
                 width="300px"
                 height="300px"
                 class="post_d_image">
        {% endif %}
        {% comment %} <a class="deletebutton" id="delete{{post.id}}" href="" data-userid="{{ user.id }}" data-catid="{{ post.id }}">Delete</a> {% endcomment %}
        <hr>
        {% comment %} Karma {% endcomment %}
        <p>Karma: {{ post.post_karma }}</p>
        <a class="upvotebutton"
           id="upvote{{ post.id }}"
           href=""
           data-userid="{{ user.id }}"
           data-catid="{{ post.id }}">Upvote</a>
        <a class="clearbutton"
           id="clearbutton{{ post.id }}"
           href=""
           data-userid="{{ user.id }}"
           data-catid="{{ post.id }}">Clear</a>
        <a class="downvotebutton"
           id="downvote{{ post.id }}"
           href=""
           data-userid="{{ user.id }}"
           data-catid="{{ post.id }}">Downvote</a>
        <br>
        <hr>
        {% comment %} Commenting {% endcomment %}
        <h4>
            <u> Comments ({{ post.comment_count }}) </u>
        </h4>
        {% for c in comment %}
            <p>
                {% comment %} ="{% url 'posty:profile' comment.pk %}"> {% endcomment %}
                <a href="/profile/{{ c.user.id }}">{{ c.user.username }}</a>: {{ c.body }}
            </p>
        {% endfor %}
        <textarea id="comment{{post.id}}" class="textarea is-info" rows="4"></textarea>
        <br>
        <a class="commentbutton"
           id="commentbutton{{ post.id }}"
           href=""
           data-userid="{{ user.id }}"
           data-catid="{{ post.id }}">
            <button class="button is-success has-background-info">Comment</button>
        </a>
    </div>
    {% comment %} Ajax {% endcomment %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="{% static 'js/postdetail.js' %}"></script>
    <link rel="stylesheet" href="{% static 'css/post_detail.css' %}">
{% endblock content %}
